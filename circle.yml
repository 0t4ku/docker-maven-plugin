machine:
  node:
    version: 0.12.0

branches:
  only:
    - master

general:
  branches:
    ignore:
      - 'gh-pages'
test:
  post:
    - "[[ x${CI_PR_NUMBER} == x ]] && mvn clean org.jacoco:jacoco-maven-plugin:prepare-agent package sonar:sonar -Dsonar.host.url=https://nemo.sonarqube.org -Dsonar.login=${SONAR_TOKEN}"

deployment:
  website:
    branch: master
    owner: fabric8io
    commands:
      - git config --global user.email "circleci@mail.com"
      - git config --global user.name "CircleCI"
      - ./doc/manual/ci-docs.sh

