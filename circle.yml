machine:
  node:
    version: 0.12.0

branches:
  only:
    - master

general:
  branches:
    ignore:
      - 'gh-pages'
test:
  post:
    - "[[ $CIRCLE_BRANCH = integration ]] && [[ x${CI_PR_NUMBER} == x ]] && mvn -Psonarqube clean package sonar:sonar -Dsonar.login=${SONAR_TOKEN}"

deployment:
  website:
    branch: master
    owner: fabric8io
    commands:
      - git config --global user.email "circleci@mail.com"
      - git config --global user.name "CircleCI"
      - ./doc/manual/ci-docs.sh

