version: "2"
services:
  data:
    build:
      context: .
    image: "fabric8/docker-compose-demo:latest"
    labels:
      "dmp.type": "example"
  tomcat:
    image: "fabric8/tomcat-7:latest"
    ports:
      - "8080:8080"
    environment:
      CATALINA_OPTS: "-Xmx32m"
      AB_OFF: "1"
    ulimits:
      memlock:
        hard: 2048
        soft: 1024
    volumes_from:
      - data